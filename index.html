<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Development &amp; Operations</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="A collection of short articles to summerize and memorize seldom used tasks.">
<meta property="og:type" content="website">
<meta property="og:title" content="Development & Operations">
<meta property="og:url" content="http://gerull.nl/index.html">
<meta property="og:site_name" content="Development & Operations">
<meta property="og:description" content="A collection of short articles to summerize and memorize seldom used tasks.">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Development & Operations">
<meta name="twitter:description" content="A collection of short articles to summerize and memorize seldom used tasks.">
<meta name="twitter:creator" content="@cgerull">
<link rel="publisher" href="https://plus.google.com/+cgerull">
  
    <link rel="alternative" href="/atom.xml" title="Development &amp; Operations" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/devop/css/style.css" type="text/css">
  

</head>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Development &amp; Operations</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">Annotations, cheatsheet and shortcuts.</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://gerull.nl"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-git-for-ubuntu" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/devop/2014/09/22/git-for-ubuntu/" class="article-date">
  <time datetime="2014-09-22T11:23:17.000Z" itemprop="datePublished">2014-09-22</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/devop/categories/Linux/">Linux</a>►<a class="article-category-link" href="/devop/categories/Linux/Git/">Git</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/devop/2014/09/22/git-for-ubuntu/">Git for Ubuntu</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Running a recent Git for Ubuntu can sometimes be problematic. The Git version in the offical Ubuntu archives lags behind the maintainers, stable, version. To solve this install the Maintainers team version.</p>
<p>Add the PPA (personal Packages Archive) to your apt sources</p>
<pre><code>*   deb [http://ppa.launchpad.net/git-core/ppa/ubuntu](http://ppa.launchpad.net/git-core/ppa/ubuntu) precise main
*   deb-src [http://ppa.launchpad.net/git-core/ppa/ubuntu](http://ppa.launchpad.net/git-core/ppa/ubuntu) precise main
</code></pre><p>or</p>
<pre><code>*   `sudo add-apt-repository ppa:git-core/ppa`
*   if add-apt-repository is not installed, install it with `apt-get install python-software-properties`
*   `sudo apt-get update &amp;&amp; sudo apt-get install git`
</code></pre><p>In a corporate envrionment the case of an unverified key can rise a problem. Cause is that</p>
<p><code>apt-key adv --recv-keys</code>;</p>
<p>may not work behind some firewalls. to solve this issue, follow these steps:</p>
<ul>
<li>Open  <a href="http://keyserver.ubuntu.com/" target="_blank" rel="external">http://keyserver.ubuntu.com/</a> in a Browser and search for the offending key. Don’t forget to mark the string as hex by prepending 0x.</li>
<li>Get key from Ubuntu keyserver</li>
<li>Insert into a file</li>
<li><code>apt-key add &lt;file&gt;</code></li>
<li><code>apt-get update</code></li>
</ul>
<p>For details see <a href="http://opensourceforgeeks.blogspot.in/2013/04/w-gpg-error-httpppalaunchpadnet-precise.html" target="_blank" rel="external">http://opensourceforgeeks.blogspot.in/2013/04/w-gpg-error-httpppalaunchpadnet-precise.html</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://gerull.nl/2014/09/22/git-for-ubuntu/" data-id="cijlscbk6000tna1ynte62ohj" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/devop/tags/Git/">Git</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/devop/tags/Linux/">Linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/devop/tags/Ubuntu/">Ubuntu</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-shrink-logic-volume" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/devop/2014/04/08/shrink-logic-volume/" class="article-date">
  <time datetime="2014-04-08T19:37:35.000Z" itemprop="datePublished">2014-04-08</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/devop/categories/Linux/">Linux</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/devop/2014/04/08/shrink-logic-volume/">Shrink logic volume</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>In this post I will point out the steps to shrink logic volumes.</p>
<p>The order of shrinking is just the reverse of expanding:</p>
<ul>
<li>un-mount the file system</li>
<li>check file system integrity</li>
<li>shrink file system</li>
<li>shrink logic volume.</li>
</ul>
<h2 id="The_steps_in_detail"><a href="#The_steps_in_detail" class="headerlink" title="The steps in detail"></a>The steps in detail</h2><p>1. First un-mount the file system to make sure no one has access anymore. For some file systems you must switch to single user mode for this. Then check the file system integrity.</p>
<p><pre class="prettyprint"># /yyy is the mount point<br>sudo umount /yyy</pre></p>
<h1 id="This_is_the_logical_volume-_vg-xxx_is_the_volume_group"><a href="#This_is_the_logical_volume-_vg-xxx_is_the_volume_group" class="headerlink" title="This is the logical volume. vg-xxx is the volume group"></a>This is the logical volume. vg-xxx is the volume group</h1><h1 id="and_yyy_is_the_symbolic_name_of_the_lv"><a href="#and_yyy_is_the_symbolic_name_of_the_lv" class="headerlink" title="and yyy is the symbolic name of the lv."></a>and yyy is the symbolic name of the lv.</h1><p>sudo e2fsck -f /dev/mapper/vg-xxx/yyy<br>2. Shrink the file system to some point</p>
<p><pre class="prettyprint">sudo resize2fs /dev/mapper/vg-xxx/yyy 2000M</pre><br>Here it goes down to 2G, but <strong>above</strong> the physical size of existing files. This command works for both ext2 and ext3.</p>
<p>3. Shrink the logic volume</p>
<p><pre class="prettyprint">sudo lvresize -L -1G /dev/mapper/vg-xxx/yyy</pre><br>Here the logic volume is shrunk by 1G. Don’t shrink beyond your file system size, the consequences are disatrous. Do the math.</p>
<p>4. Expand the file system to fit the shrunk logic volume</p>
<p><pre class="prettyprint">sudo resize2fs -p /dev/mapper/vg-xxx/yyy</pre><br>5. Remount the file system.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://gerull.nl/2014/04/08/shrink-logic-volume/" data-id="cijlscbjz000ina1y4lrzg2i2" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/devop/tags/File-System/">File System</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/devop/tags/Install/">Install</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/devop/tags/Linux/">Linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/devop/tags/Logical-Volumes/">Logical Volumes</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-expand-logic-volume" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/devop/2014/03/23/expand-logic-volume/" class="article-date">
  <time datetime="2014-03-23T21:20:10.000Z" itemprop="datePublished">2014-03-23</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/devop/categories/Linux/">Linux</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/devop/2014/03/23/expand-logic-volume/">Expand logic volume</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Logical volumes are easy to extend. The basic steps are like this: check free space –&gt; expand logic volume –&gt; expand file system. You can do it even with file system mounted.</p>
<p>Although I recommend to make a backup first and switch to single user mode  if it is a server.</p>
<p>Here’s the recipe:</p>
<p>1. Check the mounted file system with</p>
<p><code>df -h</code></p>
<p>2. Check the available logic volumes</p>
<p><code>sudo lvdisplay</code></p>
<p>3. Check how much free space available in this volume group for the growth</p>
<p><code>sudo vgdisplay</code></p>
<p>4. Now resize the logic volume up to some point (of course within the free space limit)</p>
<p><code>sudo lvresize -L +1GB /dev/mapper/vg-xxx/yyy</code></p>
<p>5. Check the new size of the logic volume</p>
<p><code>sudo lvdisplay</code></p>
<p>6. Expand the existing file system to the size of logic volume</p>
<p><code>sudo resize2fs -p /dev/mapper/vg-xxx/yyy</code></p>
<p>This command works for both ext2 and ext3 file systems.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://gerull.nl/2014/03/23/expand-logic-volume/" data-id="cijlscbjc0000na1yra72bxea" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/devop/tags/File-System/">File System</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/devop/tags/Install/">Install</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/devop/tags/Linux/">Linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/devop/tags/Logical-Volumes/">Logical Volumes</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-volume-layout" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/devop/2014/03/01/volume-layout/" class="article-date">
  <time datetime="2014-03-01T08:15:32.000Z" itemprop="datePublished">2014-03-01</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/devop/categories/Linux/">Linux</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/devop/2014/03/01/volume-layout/">Volume layout</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Here’s my personal preference for an allround Linux box. The following volume layout is a baseline. If the machine is a server reduce /home and add much more to /var where normally you data lives. For a development box increase /home for all your projects.</p>
<p>I use the lvm2 package, so these commands use the most common options.</p>
<p>First harddrive:</p>
<p>With fdisk /dev/sda</p>
<ol>
<li>/dev/sda1 -&gt; /boot ext3, 256MB</li>
<li><p>/dev/sda2 -&gt; pvcreate /dev/sda2  -&gt; vgcreate vg0 /dev/sda<br>With lvm2 tools</p>
</li>
<li><p><span style="font-family: Arial, Helvetica, sans-serif; font-size: 16px;">pvcreate /dev/sda2</span></p>
</li>
<li><span style="font-family: Arial, Helvetica, sans-serif; font-size: 16px;">vgcreate vg0 /dev/sda</span></li>
<li><span style="font-family: Arial, Helvetica, sans-serif; font-size: 16px;">lvcreate -L 2G - n root vg0 -&gt; ext3 mount on /</span></li>
<li>lvcreate -L &lt;depending on memory and disksize&gt; -n swap vg0 -&gt; use as swaparea</li>
<li>lvcreate -L 2G -n usr vg0 -&gt; ext3 mount on /usr</li>
<li>lvcreate -L 512M -n tmp -vg0 &gt; ext3, mount on /tmp</li>
<li>lvcreate -L &lt;512M - 2G&gt; -n home vg0 -&gt; ext3, mount on /home</li>
<li>lvcreate -L 256M -n opt vg0 -&gt; ext3, mount on /opt</li>
<li>lvcreate -L 512M -n usrlocal vg0 -&gt; ext3, mount on /usrlocal</li>
<li>lvcreate -L &lt;1G - nG&gt; -n var vg0 -&gt; ext3, mount on /var<br>Additional harddisks</li>
</ol>
<p>/dev/sd[b..z] -&gt; extend pv and use where the bulk data is, normally var</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://gerull.nl/2014/03/01/volume-layout/" data-id="cijlscbjo000bna1yok0ncubl" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/devop/tags/File-System/">File System</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/devop/tags/Installation/">Installation</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/devop/tags/Linux/">Linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/devop/tags/Logical-Volumes/">Logical Volumes</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-linux-file-system" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/devop/2014/02/22/linux-file-system/" class="article-date">
  <time datetime="2014-02-21T23:53:51.000Z" itemprop="datePublished">2014-02-22</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/devop/categories/Linux/">Linux</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/devop/2014/02/22/linux-file-system/">Linux File System</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>This is just a short example how I use the Linux file system. A full discussion with lot’s of links you will find on <a href="http://en.wikipedia.org/wiki/Filesystem_Hierarchy_Standard" title="Wikipedia" target="_blank" rel="external">Wikipedia</a>. The home of the Linux File System Hierarchy is <a href="http://www.pathname.com/fhs/" title="FHS" target="_blank" rel="external">here</a>.<br>The layout below is the (almost) default of Debian and Ubuntu distributions.</p>
<p>&nbsp;</p>
<p><strong>/home</strong></p>
<p>Just for personal settings, annotations  and workspaces.</p>
<p><strong>/tmp</strong></p>
<p>Classic place to put everything short living. Probably best to (automatically) clean it out regularly.</p>
<p><strong>/var/www</strong></p>
<p>Static and dynamic websites</p>
<p>/<strong>var/database</strong></p>
<p>Database data-files, if big put on its own logical volume.</p>
<p><strong>/var/&lt;app-name&gt;</strong></p>
<p>Any other non-web, non-db data or archive files.</p>
<p>&nbsp;</p>
<p>Other distributions use slightly different file system layouts and the data-files are maybe in different folders, but as mentioned earlier this is my personal approach.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://gerull.nl/2014/02/22/linux-file-system/" data-id="cijlscbk3000ona1ymyh4y4sr" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/devop/tags/File-System/">File System</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/devop/tags/Install/">Install</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/devop/tags/Linux/">Linux</a></li></ul>

    </footer>
  </div>
  
</article>


  
  
</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/devop/categories/Linux/">Linux</a><span class="category-list-count">5</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/devop/categories/Linux/Git/">Git</a><span class="category-list-count">1</span></li></ul></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/devop/tags/File-System/">File System</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/devop/tags/Git/">Git</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/devop/tags/Install/">Install</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/devop/tags/Installation/">Installation</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/devop/tags/Linux/">Linux</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/devop/tags/Logical-Volumes/">Logical Volumes</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/devop/tags/Ubuntu/">Ubuntu</a><span class="tag-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/devop/tags/File-System/" style="font-size: 16.67px;">File System</a> <a href="/devop/tags/Git/" style="font-size: 10px;">Git</a> <a href="/devop/tags/Install/" style="font-size: 13.33px;">Install</a> <a href="/devop/tags/Installation/" style="font-size: 10px;">Installation</a> <a href="/devop/tags/Linux/" style="font-size: 20px;">Linux</a> <a href="/devop/tags/Logical-Volumes/" style="font-size: 13.33px;">Logical Volumes</a> <a href="/devop/tags/Ubuntu/" style="font-size: 10px;">Ubuntu</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/devop/archives/2014/09/">September 2014</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/devop/archives/2014/04/">April 2014</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/devop/archives/2014/03/">March 2014</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/devop/archives/2014/02/">February 2014</a><span class="archive-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/devop/2014/09/22/git-for-ubuntu/">Git for Ubuntu</a>
          </li>
        
          <li>
            <a href="/devop/2014/04/08/shrink-logic-volume/">Shrink logic volume</a>
          </li>
        
          <li>
            <a href="/devop/2014/03/23/expand-logic-volume/">Expand logic volume</a>
          </li>
        
          <li>
            <a href="/devop/2014/03/01/volume-layout/">Volume layout</a>
          </li>
        
          <li>
            <a href="/devop/2014/02/22/linux-file-system/">Linux File System</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2016 Claus Gerull<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/devop/fancybox/jquery.fancybox.css" type="text/css">
  <script src="/devop/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>


<script src="/devop/js/script.js" type="text/javascript"></script>

  </div>
</body>
</html>